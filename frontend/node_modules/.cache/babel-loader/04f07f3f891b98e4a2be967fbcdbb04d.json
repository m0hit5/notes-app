{"ast":null,"code":"import _objectSpread from\"C:/Users/MOHIT/Desktop/3-Django+React App/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/MOHIT/Desktop/3-Django+React App/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/MOHIT/Desktop/3-Django+React App/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/MOHIT/Desktop/3-Django+React App/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{ReactComponent as ArrowLeft}from\"@svgr/webpack?-svgo,+titleProp,+ref!../assets/arrow-left.svg\";import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(_ref){var match=_ref.match,history=_ref.history;var noteId=match.params.id;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];useEffect(function(){getNote();},[noteId]);var getNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(noteId==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;_context.next=5;return fetch(\"/api/notes/\".concat(noteId,\"/\"));case 5:response=_context.sent;_context.next=8;return response.json();case 8:data=_context.sent;setNote(data);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);console.error('Error fetching note:',_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return function getNote(){return _ref2.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"/api/notes/\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 3:refreshHomePage();_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.error('Error creating note:',_context2.t0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function createNote(){return _ref3.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"/api/notes/\".concat(noteId,\"/\"),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});case 3:refreshHomePage();_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.error('Error updating note:',_context3.t0);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function updateNote(){return _ref4.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return fetch(\"/api/notes/\".concat(noteId,\"/\"),{method:'DELETE',headers:{'Content-Type':'application/json'}});case 3:refreshHomePage();_context4.next=9;break;case 6:_context4.prev=6;_context4.t0=_context4[\"catch\"](0);console.error('Error deleting note:',_context4.t0);case 9:case\"end\":return _context4.stop();}}},_callee4,null,[[0,6]]);}));return function deleteNote(){return _ref5.apply(this,arguments);};}();var handleSubmit=function handleSubmit(){console.log('NOTE:',note);if(noteId!=='new'&&note.body===''){deleteNote();}else if(noteId!=='new'){updateNote();}else if(noteId==='new'&&note.body!==null){createNote();}};var handleChange=function handleChange(value){setNote(function(note){return _objectSpread(_objectSpread({},note),{},{'body':value});});console.log('Handle Change:',note);};var refreshHomePage=function refreshHomePage(){history.push('/');window.location.reload();// Refresh the home page\n};return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:/*#__PURE__*/_jsx(ArrowLeft,{onClick:handleSubmit})}),noteId!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"Done\"})]}),/*#__PURE__*/_jsx(\"textarea\",{onChange:function onChange(e){handleChange(e.target.value);},value:note===null||note===void 0?void 0:note.body})]});};export default NotePage;","map":{"version":3,"sources":["C:/Users/MOHIT/Desktop/3-Django+React App/frontend/src/pages/NotePage.js"],"names":["React","useState","useEffect","Link","NotePage","match","history","noteId","params","id","note","setNote","getNote","fetch","response","json","data","console","error","createNote","method","headers","body","JSON","stringify","refreshHomePage","updateNote","deleteNote","handleSubmit","log","handleChange","value","push","window","location","reload","e","target"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg'\nimport { Link } from 'react-router-dom'\n\nconst NotePage = ({ match, history }) => {\n  let noteId = match.params.id\n  const [note, setNote] = useState(null)\n\n  useEffect(() => {\n    getNote()\n  }, [noteId])\n\n  let getNote = async () => {\n    if (noteId === 'new') return\n\n    try {\n      const response = await fetch(`/api/notes/${noteId}/`)\n      const data = await response.json()\n      setNote(data)\n    } catch (error) {\n      console.error('Error fetching note:', error)\n    }\n  }\n\n  let createNote = async () => {\n    try {\n      await fetch(`/api/notes/`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(note),\n      })\n      refreshHomePage()\n    } catch (error) {\n      console.error('Error creating note:', error)\n    }\n  }\n\n  let updateNote = async () => {\n    try {\n      await fetch(`/api/notes/${noteId}/`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(note),\n      })\n      refreshHomePage()\n    } catch (error) {\n      console.error('Error updating note:', error)\n    }\n  }\n\n  let deleteNote = async () => {\n    try {\n      await fetch(`/api/notes/${noteId}/`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      })\n      refreshHomePage()\n    } catch (error) {\n      console.error('Error deleting note:', error)\n    }\n  }\n\n  let handleSubmit = () => {\n    console.log('NOTE:', note)\n    if (noteId !== 'new' && note.body === '') {\n      deleteNote()\n    } else if (noteId !== 'new') {\n      updateNote()\n    } else if (noteId === 'new' && note.body !== null) {\n      createNote()\n    }\n  }\n\n  let handleChange = (value) => {\n    setNote((note) => ({ ...note, 'body': value }))\n    console.log('Handle Change:', note)\n  }\n\n  let refreshHomePage = () => {\n    history.push('/')\n    window.location.reload() // Refresh the home page\n  }\n\n  return (\n    <div className=\"note\">\n      <div className=\"note-header\">\n        <h3>\n          <ArrowLeft onClick={handleSubmit} />\n        </h3>\n        {noteId !== 'new' ? (\n          <button onClick={deleteNote}>Delete</button>\n        ) : (\n          <button onClick={handleSubmit}>Done</button>\n        )}\n      </div>\n      <textarea onChange={(e) => { handleChange(e.target.value) }} value={note?.body}></textarea>\n    </div>\n  )\n}\n\nexport default NotePage\n"]},"metadata":{},"sourceType":"module"}